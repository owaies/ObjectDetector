<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Vision Suite</title>
    <!-- NEW: Link to your favicon -->
    <link rel="icon" href="{{ url_for('static', filename='favicon.png') }}" type="image/png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        body { background-color: #f8f9fa; font-family: 'Poppins', sans-serif; }
        .container { max-width: 800px; }
        .card { box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.1); border-radius: 0.75rem; }
        h1 { color: #0d6efd; font-weight: 600; }
        .form-check-input:checked { background-color: #0d6efd; border-color: #0d6efd; }
    </style>
</head>
<body>
    <div class="container my-5">
        <div class="card">
            <div class="card-body p-4 p-md-5">
                <h1 class="text-center mb-3">AI Vision Suite ðŸ”¬âœ¨</h1>
                <p class="text-center text-muted mb-4">Upload a file and choose an analysis mode.</p>
                
                <form id="detection-form" action="/detect" method="post" enctype="multipart/form-data">
                    
                    <div class="mb-4">
                        <label class="form-label"><b>1. Choose Analysis Mode</b></label>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="detection_mode" id="detectRadio" value="detect" checked>
                            <label class="form-check-label" for="detectRadio">
                                <b>Bounding Box Detection</b> (Flexible)
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="detection_mode" id="segmentRadio" value="segment">
                            <label class="form-check-label" for="segmentRadio">
                                <b>Instance Segmentation</b> (Precise)
                            </label>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="image" class="form-label"><b>2. Choose an Image or Video</b></label>
                        <input type="file" class="form-control" id="image" name="image" required>
                    </div>
                    
                    <div class="mb-3" id="objects-container">
                        <label for="objects" class="form-label"><b>3. What should I find?</b> (comma-separated)</label>
                        <input type="text" class="form-control" id="objects" name="objects" placeholder="e.g., person, car (leave blank for default)">
                    </div>

                    <div class="row">
                         <div class="col-md-6 mb-3">
                            <label for="confidence" class="form-label"><b>4. Confidence Threshold</b>: <span id="confidence-value">25%</span></label>
                            <input type="range" class="form-range" id="confidence" name="confidence" min="0.1" max="0.9" step="0.05" value="0.25">
                        </div>
                        <div class="col-md-6 mb-4" id="color-picker-container">
                            <label for="color" class="form-label"><b>5. Box/Mask Color</b></label>
                            <input type="color" class="form-control form-control-color" id="color" name="color" value="#00FF00" title="Choose your color">
                        </div>
                    </div>

                    <div class="d-grid">
                        <button id="submit-btn" type="submit" class="btn btn-primary btn-lg">
                            <span id="btn-text">Analyze</span>
                            <span id="spinner" class="spinner-border spinner-border-sm d-none" role="status"></span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        document.querySelectorAll('input[name="detection_mode"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const objectsContainer = document.getElementById('objects-container');
                const colorContainer = document.getElementById('color-picker-container');
                if (this.value === 'segment') {
                    objectsContainer.style.display = 'none';
                    colorContainer.style.display = 'none'; 
                } else {
                    objectsContainer.style.display = 'block';
                    colorContainer.style.display = 'block';
                }
            });
        });
        
        document.querySelector('input[name="detection_mode"]:checked').dispatchEvent(new Event('change'));
        
        document.getElementById('confidence').addEventListener('input', (e) => {
            document.getElementById('confidence-value').textContent = `${Math.round(e.target.value * 100)}%`;
        });

        document.getElementById('detection-form').addEventListener('submit', function() {
            document.getElementById('submit-btn').disabled = true;
            document.getElementById('btn-text').textContent = 'Processing... This may take a moment.';
            document.getElementById('spinner').classList.remove('d-none');
        });
    </script>
</body>
</html>


